<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 580" fill="none">
  <defs>
    <linearGradient id="grad-blue" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" stop-color="#2563eb"/>
      <stop offset="50%" stop-color="#4f46e5"/>
      <stop offset="100%" stop-color="#9333ea"/>
    </linearGradient>
    <linearGradient id="grad-subtle" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" stop-color="#eff6ff"/>
      <stop offset="100%" stop-color="#f5f3ff"/>
    </linearGradient>
    <linearGradient id="grad-private" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" stop-color="#fdf4ff"/>
      <stop offset="100%" stop-color="#faf5ff"/>
    </linearGradient>
    <filter id="shadow" x="-4%" y="-4%" width="108%" height="108%">
      <feDropShadow dx="0" dy="2" stdDeviation="4" flood-color="#000" flood-opacity="0.08"/>
    </filter>
    <filter id="shadow-sm" x="-4%" y="-4%" width="108%" height="108%">
      <feDropShadow dx="0" dy="1" stdDeviation="2" flood-color="#000" flood-opacity="0.06"/>
    </filter>
  </defs>

  <!-- Background -->
  <rect width="900" height="580" rx="12" fill="#ffffff"/>

  <!-- Title -->
  <text x="450" y="36" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="18" font-weight="700" fill="#111827">Sandstone Stake Pool Architecture</text>

  <!-- AWS Region Container -->
  <rect x="160" y="52" width="720" height="516" rx="10" fill="url(#grad-subtle)" stroke="#c7d2fe" stroke-width="1.5" stroke-dasharray="6 3"/>
  <text x="176" y="72" font-family="system-ui, -apple-system, sans-serif" font-size="11" font-weight="600" fill="#6366f1" letter-spacing="0.05em">AWS REGION â€” 3 AVAILABILITY ZONES</text>

  <!-- Internet / Peers -->
  <rect x="16" y="132" width="120" height="100" rx="10" fill="#ffffff" stroke="#d1d5db" stroke-width="1.5" filter="url(#shadow-sm)"/>
  <text x="76" y="172" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="24">ğŸŒ</text>
  <text x="76" y="196" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="12" font-weight="600" fill="#374151">Internet</text>
  <text x="76" y="212" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="10" fill="#6b7280">Cardano Peers</text>

  <!-- Monitoring box -->
  <rect x="16" y="370" width="120" height="100" rx="10" fill="#ffffff" stroke="#d1d5db" stroke-width="1.5" filter="url(#shadow-sm)"/>
  <text x="76" y="410" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="24">ğŸ“Š</text>
  <text x="76" y="434" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="12" font-weight="600" fill="#374151">CloudWatch</text>
  <text x="76" y="450" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="10" fill="#6b7280">Monitoring</text>

  <!-- Public Subnet Area -->
  <rect x="176" y="86" width="264" height="200" rx="8" fill="#ffffff" stroke="#93c5fd" stroke-width="1.5" filter="url(#shadow)"/>
  <rect x="176" y="86" width="264" height="28" rx="8" fill="#dbeafe"/>
  <rect x="176" y="100" width="264" height="14" fill="#dbeafe"/>
  <text x="308" y="105" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="11" font-weight="700" fill="#1e40af">PUBLIC SUBNETS</text>

  <!-- Relay Node 1 -->
  <rect x="192" y="126" width="108" height="76" rx="6" fill="#ffffff" stroke="#2563eb" stroke-width="1.5" filter="url(#shadow-sm)"/>
  <text x="246" y="152" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="13" font-weight="600" fill="#1e40af">Relay Node 1</text>
  <text x="246" y="170" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="10" fill="#6b7280">AZ-1 Â· Elastic IP</text>
  <text x="246" y="186" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="10" fill="#6b7280">Port 3001</text>

  <!-- Relay Node 2 -->
  <rect x="316" y="126" width="108" height="76" rx="6" fill="#ffffff" stroke="#2563eb" stroke-width="1.5" filter="url(#shadow-sm)"/>
  <text x="370" y="152" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="13" font-weight="600" fill="#1e40af">Relay Node 2</text>
  <text x="370" y="170" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="10" fill="#6b7280">AZ-2 Â· Elastic IP</text>
  <text x="370" y="186" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="10" fill="#6b7280">Port 3001</text>

  <!-- Service Discovery label under relays -->
  <rect x="198" y="214" width="216" height="24" rx="4" fill="#eff6ff" stroke="#93c5fd" stroke-width="1"/>
  <text x="306" y="230" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="10" font-weight="500" fill="#3b82f6">Cloud Map Service Discovery</text>
  <text x="306" y="244" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="9" fill="#6b7280">Public + Private DNS Â· TTL 0</text>

  <!-- Private Subnet Area -->
  <rect x="176" y="304" width="264" height="252" rx="8" fill="#ffffff" stroke="#c4b5fd" stroke-width="1.5" filter="url(#shadow)"/>
  <rect x="176" y="304" width="264" height="28" rx="8" fill="#ede9fe"/>
  <rect x="176" y="318" width="264" height="14" fill="#ede9fe"/>
  <text x="308" y="323" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="11" font-weight="700" fill="#5b21b6">PRIVATE SUBNETS</text>

  <!-- Block Producer -->
  <rect x="206" y="344" width="204" height="80" rx="6" fill="#ffffff" stroke="#7c3aed" stroke-width="2" filter="url(#shadow-sm)"/>
  <text x="308" y="370" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="14" font-weight="700" fill="#5b21b6">Block Producer</text>
  <text x="308" y="388" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="10" fill="#6b7280">Auto Scaling Group Â· 3 AZs</text>
  <text x="308" y="404" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="10" fill="#6b7280">No Internet Access</text>

  <!-- EFS -->
  <rect x="206" y="438" width="204" height="52" rx="6" fill="#faf5ff" stroke="#a78bfa" stroke-width="1.5" filter="url(#shadow-sm)"/>
  <text x="308" y="462" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="12" font-weight="600" fill="#6d28d9">Encrypted EFS</text>
  <text x="308" y="478" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="10" fill="#6b7280">KMS Encrypted Â· Multi-AZ Â· Auto Backup</text>

  <!-- EFS connection -->
  <line x1="308" y1="424" x2="308" y2="438" stroke="#a78bfa" stroke-width="1.5"/>

  <!-- BP to EFS label -->
  <text x="318" y="434" font-family="system-ui, -apple-system, sans-serif" font-size="8" fill="#8b5cf6">mount</text>

  <!-- Lifecycle hook label -->
  <rect x="206" y="500" width="204" height="44" rx="6" fill="#f5f3ff" stroke="#c4b5fd" stroke-width="1"/>
  <text x="308" y="518" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="10" font-weight="500" fill="#7c3aed">ASG Lifecycle Hooks</text>
  <text x="308" y="532" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="9" fill="#6b7280">Auto register/deregister on scale events</text>

  <!-- Right side: AWS Services -->
  <!-- VPC Endpoints -->
  <rect x="468" y="86" width="200" height="128" rx="8" fill="#ffffff" stroke="#6ee7b7" stroke-width="1.5" filter="url(#shadow)"/>
  <rect x="468" y="86" width="200" height="28" rx="8" fill="#d1fae5"/>
  <rect x="468" y="100" width="200" height="14" fill="#d1fae5"/>
  <text x="568" y="105" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="11" font-weight="700" fill="#047857">VPC ENDPOINTS</text>
  <text x="568" y="105" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="11" font-weight="700" fill="#047857">VPC ENDPOINTS</text>
  <text x="484" y="130" font-family="system-ui, -apple-system, sans-serif" font-size="11" fill="#374151">â†’ Systems Manager</text>
  <text x="484" y="148" font-family="system-ui, -apple-system, sans-serif" font-size="11" fill="#374151">â†’ CloudWatch</text>
  <text x="484" y="166" font-family="system-ui, -apple-system, sans-serif" font-size="11" fill="#374151">â†’ CloudFormation</text>
  <text x="484" y="184" font-family="system-ui, -apple-system, sans-serif" font-size="11" fill="#374151">â†’ S3 (Gateway)</text>
  <text x="484" y="200" font-family="system-ui, -apple-system, sans-serif" font-size="9" fill="#6b7280">Private connectivity Â· No internet</text>

  <!-- S3 Backup -->
  <rect x="468" y="232" width="200" height="80" rx="8" fill="#ffffff" stroke="#fbbf24" stroke-width="1.5" filter="url(#shadow)"/>
  <text x="568" y="262" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="13" font-weight="600" fill="#92400e">S3 Ledger Snapshots</text>
  <text x="568" y="280" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="10" fill="#6b7280">Hourly chain sync backup</text>
  <text x="568" y="296" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="10" fill="#6b7280">Fast relay bootstrap</text>

  <!-- CI/CD Pipeline -->
  <rect x="468" y="330" width="200" height="96" rx="8" fill="#ffffff" stroke="#f472b6" stroke-width="1.5" filter="url(#shadow)"/>
  <rect x="468" y="330" width="200" height="28" rx="8" fill="#fce7f3"/>
  <rect x="468" y="344" width="200" height="14" fill="#fce7f3"/>
  <text x="568" y="349" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="11" font-weight="700" fill="#be185d">CI/CD PIPELINE</text>
  <text x="484" y="376" font-family="system-ui, -apple-system, sans-serif" font-size="11" fill="#374151">Git â†’ CodeBuild â†’ Packer</text>
  <text x="484" y="394" font-family="system-ui, -apple-system, sans-serif" font-size="11" fill="#374151">â†’ Immutable AMI</text>
  <text x="484" y="412" font-family="system-ui, -apple-system, sans-serif" font-size="9" fill="#6b7280">Ansible provisioned Â· ARM Graviton</text>

  <!-- Security Groups callout -->
  <rect x="468" y="444" width="200" height="64" rx="8" fill="#ffffff" stroke="#f87171" stroke-width="1.5" filter="url(#shadow)"/>
  <text x="568" y="470" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="13" font-weight="600" fill="#b91c1c">Security Groups</text>
  <text x="568" y="488" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="10" fill="#6b7280">Least-privilege Â· per-component</text>
  <text x="568" y="500" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="10" fill="#6b7280">No SSH Â· SSM only</text>

  <!-- Legend -->
  <rect x="700" y="86" width="166" height="164" rx="8" fill="#f9fafb" stroke="#e5e7eb" stroke-width="1"/>
  <text x="783" y="108" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="11" font-weight="700" fill="#374151">LEGEND</text>
  <line x1="714" y1="122" x2="740" y2="122" stroke="#2563eb" stroke-width="2"/>
  <text x="748" y="126" font-family="system-ui, -apple-system, sans-serif" font-size="10" fill="#374151">Public (relay)</text>
  <line x1="714" y1="142" x2="740" y2="142" stroke="#7c3aed" stroke-width="2"/>
  <text x="748" y="146" font-family="system-ui, -apple-system, sans-serif" font-size="10" fill="#374151">Private (leader)</text>
  <line x1="714" y1="162" x2="740" y2="162" stroke="#047857" stroke-width="2"/>
  <text x="748" y="166" font-family="system-ui, -apple-system, sans-serif" font-size="10" fill="#374151">VPC endpoints</text>
  <line x1="714" y1="182" x2="740" y2="182" stroke="#fbbf24" stroke-width="2"/>
  <text x="748" y="186" font-family="system-ui, -apple-system, sans-serif" font-size="10" fill="#374151">Storage / backup</text>
  <line x1="714" y1="202" x2="740" y2="202" stroke="#f472b6" stroke-width="2"/>
  <text x="748" y="206" font-family="system-ui, -apple-system, sans-serif" font-size="10" fill="#374151">CI/CD</text>
  <line x1="714" y1="222" x2="740" y2="222" stroke="#f87171" stroke-width="2"/>
  <text x="748" y="226" font-family="system-ui, -apple-system, sans-serif" font-size="10" fill="#374151">Security</text>

  <!-- Connection: Internet â†’ Relays -->
  <line x1="136" y1="164" x2="192" y2="164" stroke="#94a3b8" stroke-width="1.5" marker-end="url(#arrow)"/>

  <!-- Connection: Relay 1 â†’ Block Producer -->
  <path d="M 246 202 L 246 264 L 280 264 L 280 344" stroke="#94a3b8" stroke-width="1.5" fill="none" stroke-dasharray="4 2"/>

  <!-- Connection: Relay 2 â†’ Block Producer -->
  <path d="M 370 202 L 370 264 L 336 264 L 336 344" stroke="#94a3b8" stroke-width="1.5" fill="none" stroke-dasharray="4 2"/>

  <!-- Connection: Monitoring -->
  <path d="M 136 400 L 164 400 L 164 384 L 206 384" stroke="#94a3b8" stroke-width="1" fill="none" stroke-dasharray="3 2"/>

  <!-- Connection: Block Producer â†’ S3 -->
  <path d="M 410 384 L 438 384 L 438 272 L 468 272" stroke="#fbbf24" stroke-width="1.5" fill="none" stroke-dasharray="4 2"/>

  <!-- Connection labels -->
  <text x="154" y="156" font-family="system-ui, -apple-system, sans-serif" font-size="8" fill="#94a3b8">P2P</text>
  <text x="254" y="278" font-family="system-ui, -apple-system, sans-serif" font-size="8" fill="#94a3b8">internal only</text>
  <text x="442" y="324" font-family="system-ui, -apple-system, sans-serif" font-size="8" fill="#d97706" transform="rotate(-90, 442, 324)">hourly sync</text>

  <!-- Arrowhead marker -->
  <defs>
    <marker id="arrow" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
      <path d="M 0 0 L 8 3 L 0 6 Z" fill="#94a3b8"/>
    </marker>
  </defs>
</svg>
